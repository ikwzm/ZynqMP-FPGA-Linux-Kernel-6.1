--- linux-6.1.0/Documentation/devicetree/bindings/timer/cdns,ttc.yaml	2023-07-05 08:37:06.971337100 +0900
+++ linux-xlnx-2023.1/Documentation/devicetree/bindings/timer/cdns,ttc.yaml	2023-07-05 08:33:04.860787500 +0900
@@ -32,12 +32,26 @@
     description: |
       Bit width of the timer, necessary if not 16.
 
+  "#pwm-cells":
+    description: |
+      Required to configure TTC as PWM device, supported cells are 0 to 3.
+    minimum: 0
+    maximum: 3
+
 required:
   - compatible
   - reg
-  - interrupts
   - clocks
 
+allOf:
+  - if:
+      not:
+        required:
+          - "#pwm-cells"
+    then:
+      required:
+        - interrupts
+
 additionalProperties: false
 
 examples:
@@ -50,3 +64,12 @@
         clocks = <&cpu_clk 3>;
         timer-width = <32>;
     };
+
+  - |
+    ttc1: ttc1@f8002000 {
+        compatible = "cdns,ttc";
+        reg = <0xF8002000 0x1000>;
+        clocks = <&cpu_clk 3>;
+        timer-width = <32>;
+        #pwm-cells = <3>;
+    };
--- linux-6.1.0/drivers/clocksource/timer-cadence-ttc.c	2023-07-05 08:37:19.721426100 +0900
+++ linux-xlnx-2023.1/drivers/clocksource/timer-cadence-ttc.c	2023-07-05 08:33:16.272871200 +0900
@@ -476,6 +476,9 @@
 	u32 timer_width = 16;
 	struct device_node *timer = pdev->dev.of_node;
 
+	if (of_property_read_bool(timer, "#pwm-cells"))
+		return -ENODEV;
+
 	if (initialized)
 		return 0;
 
--- linux-6.1.0/include/clocksource/timer-xilinx.h	2023-07-05 08:37:37.900809400 +0900
+++ linux-xlnx-2023.1/include/clocksource/timer-xilinx.h	2023-07-05 08:33:34.949317400 +0900
@@ -41,7 +41,7 @@
 struct xilinx_timer_priv {
 	struct regmap *map;
 	struct clk *clk;
-	u32 max;
+	u64 max;
 };
 
 /**
